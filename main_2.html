<!DOCTYPE html>
<html>
<head lang='en'>

	<title>Main Page - Welcome</title>


<link rel="stylesheet" type="text/css" href="assets/css/reset.css">

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">



<link rel="stylesheet" type="text/css" href="assets/css/style.css">

<!-- To ensure proper rendering and touch zooming -->
<meta name="viewport" content="width=device-width, initial-scale=1">
	
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

</head>

<body>

	<!-- Navigation Bar -->
	<nav class="navbar navbar-inverse">
		<div class="container-fluid">
			<div class="navbar-header">
				<a class="navbar-brand" href="#">Word App</a>
			</div>	
			<ul class="nav navbar-nav navbar-right">
				<li class="active"><a href="#">Search</a></li>
				<li><a href="favorite.html">Favorites</a></li>
				<li><a href="challenge.html">Challenge</a></li>
				<!-- when selected user would be logged out of their profile and be brought to the log in screen -->
				<li><a href="login">Log Out</a></li>
			</ul>
		</div>
	</nav>

	<div class="container">

		<div class="row">
			<div class="col-md-3"></div>
			<div class="col-md-6">
				<form>
					<!-- user would enter in word they want to find the definition of -->
					<!-- <label for="word-entry">Enter a word: </label> -->
					<input type="text"  id="input" placeholder="enter a word">
					<!-- when selected button will display definition of word located in input section --> 
					<button class="btn btn-default button-style" id="search"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></button>

				<!-- when selected it will take user to a new page that displays list of favorite words -->
				<button class="btn btn-default button-style" id="button2"><span class="glyphicon glyphicon-star" aria-hidden="true"></button>
				</form>

			</div>
			<div class="col-md-3"></div>
		</div>

		<div class="row">
			<div class="col-md-3"></div>

			<div class="col-md-6">


				<div id="word-dumpster">

					<!-- here the word and its type will be properly formatted
					and displayed -->
					<div id="word-info">
					</div>

					<div id="word-definition">
					</div>
				</div>

			<div class="col-md-3"></div>

			</div>
		</div>


	</div>


	<script type="text/javascript">

		//tooltip for favorites when star is hovered
		  $( function() {
		    $( document ).tooltip();
		  } );
		

		$('#search').on("click", function(){

			event.preventDefault();

			var word = "";

			word = ($('#input').val().trim()).toLowerCase();
			$('#input').val('');
			// console.log(word);



			var queryURL = 'https://fathomless-plains-61908.herokuapp.com/dictionary/entries/en/' + "" + word + "" ;

			$.ajax({
				url: queryURL,
				method: "GET"

			}).done(function(response){

				console.log(response);

				console.log("Will use this to check whether there are examples sentences available or not: ");

				console.log(Object.keys(response.results[0].lexicalEntries[0].entries[0].senses[0]));

				console.log("# OF LEXICAL ENTRIES: " + (response.results[0].lexicalEntries).length + "... meaning, there's more than one word type.");

				console.log("lexicalEntries[i] > entries[i] > senses[i]: "+(response.results[0].lexicalEntries[0].entries[0].senses).length + "... meaning we have 5 available definitions");
				

				// var wordPronunciation = " | " + response.results[0].lexicalEntries[0].pronunciations[0].phoneticSpelling + " |";


				console.log(word + " is an " + wordType);


				if ((response.results[0].lexicalEntries).length > 1){

					console.log("there is more than one lexical entry");

					var numOfDefinitions = (response.results[0].lexicalEntries[0].entries[0].senses).length;

					var wordType = (response.results[0].lexicalEntries[0].lexicalCategory).toLowerCase();

					var $wordInfo = '<h2>' + word +"</h2>" +
								'<h4>' + wordType + '</h4>';

					$('#word-info').empty();
					$('#word-definition').html($wordInfo);

					
					for (var i = 0; i < numOfDefinitions; i++) {

						//code goes here
						console.log("inside loop");

						var $definition = '<p>' + '<strong>' + (i+1) + '</strong>' + " " + response.results[0].lexicalEntries[0].entries[0].senses[i].definitions[0] + '</p>';

						$('#word-definition').append($definition);


					};


				}else{

					console.log("there is only one lexical entry");
					var definition = response.results[0].lexicalEntries[0].entries[0].senses[0].definitions[0];

					var wordType = (response.results[0].lexicalEntries[0].lexicalCategory).toLowerCase();

					var exampleSentence = response.results[0].lexicalEntries[0].entries[0].senses[0].examples[0].text;

					//this looks horrible to the eye.
				var $wordInfo = '<h2>' + word +"</h2>" +
								'<h4>' + wordType + '</h4>';

				$('#word-info').empty();
				$('#word-info').html($wordInfo);
				$('#word-definition').html(definition);
				$('#word-definition').append(": " + "<i>"+ exampleSentence + "</i>" + ".");
				};

			});

		});


	</script>

<!-- first, we look into the lexicalEntries array to check whether or not there is more than one entry for the word that was searched... so for instance, the word "front" has three lexicalEntries. One is for "front" as a Noun, the other as an Adjective, and lastly as a Verb... So, here is where the branching of our conditionals needs to start happenning. does the returned word have more than one lexical entry? if there is only one, we go in this direction... if it has more than one, we go in this other direction.

if it has only one, we grab the definition and display it. if the word has more than one definition within the senses ARRAY, then we need to iterate through that array, and display all definitions that are available to us.

furthermore, not only do we grab the definition, but we also grab the example sentence... for which we need to check first. we need to make sure whether there is an examples array within the object that holds the definitions... before we continue, it happens like this... entries is an array of objects. within the object in the first index, there are several properties, which themselves are arrays of objects. inside the object of the entries array, there is a property called "senses", which is, as aforementioned, an array of objects. each object within that array holds properties such as "definitions," and "examples". these are themselves arrays. we need to constantly be checking for whether an "examples" property exists or not. THIS IS MORE IMPORTANT THAN CHECKING FOR MULTIPLE DEFINITIONS. why? because if there is no example sentence and we try to display one, we will get an error. on the other hand, if there are multiple definitions and we grab one, then we will only be displaying one definition. this can be easily fixed.  -->

<!-- for various definitions... the format ought to look like this...
		WORD
		wordType

		1 definition1: example sentence
		2 definition2: example sentence
		3 definition3: example sentence

		wordType

		1 definition1: example sentence
		2 definition2: example sentence
		3 definition3: example sentence

		wordType

		1 definition1: example sentence
		2 definition2: example sentence
		3 definition3: example sentence

		etc -->

</body>


</html>